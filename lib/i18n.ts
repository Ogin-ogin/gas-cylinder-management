// ...多言語対応の雛形...
export const languages = [
  'ja', 'en', 'zh-CN', 'zh-TW', 'ko', 'ar', 'sv', 'de', 'fr'
];

export const defaultLanguage = 'ja';

const translations: Record<string, Record<string, string>> = {
  ja: {
    dashboard: 'ダッシュボード',
    cylinderList: 'ボンベ一覧',
    addCylinder: '新規登録',
    edit: '編集',
    delete: '削除',
    updatePressure: '残圧をすぐに更新',
    pressureChart: '残圧チャート',
    pressureStatus: '残圧状態',
    expiryStatus: '返却期限',
    lastUpdated: '最終更新',
    registerDate: '登録日',
    location: '設置場所',
    gasType: 'ガス種類',
    qrCode: 'QRコード',
    noHistory: '履歴なし',
    notFound: 'ボンベが見つかりません',
    noCylinders: 'ボンベがありません',
    confirmDelete: '本当に削除しますか？',
    qrManagement: 'QRコード管理',
    generateQR: 'QR生成',
    unusedQR: '未紐付けQRコード',
    allQR: '全QRコード一覧',
    link: 'URL',
    add: '追加',
    cancel: 'キャンセル',
    save: '保存',
    close: '閉じる',
    loading: '読み込み中...',
    daysAgo: '{days}日経過',
    daysLeft: '{days}日後',
    normal: '正常',
    warning: '警告',
    danger: '危険',
    expired: '期限切れ',
    urgent: '緊急',
    attention: '注意',
    demoMode: 'デモモード',
    demoModeDescription: 'データは保存されません',
  },
  en: {
    dashboard: 'Dashboard',
    cylinderList: 'Cylinder List',
    addCylinder: 'Add',
    edit: 'Edit',
    delete: 'Delete',
    updatePressure: 'Quick Pressure Update',
    pressureChart: 'Pressure Chart',
    pressureStatus: 'Pressure Status',
    expiryStatus: 'Return Deadline',
    lastUpdated: 'Last Updated',
    registerDate: 'Register Date',
    location: 'Location',
    gasType: 'Gas Type',
    qrCode: 'QR Code',
    noHistory: 'No history',
    notFound: 'Cylinder not found',
    noCylinders: 'No cylinders',
    confirmDelete: 'Are you sure to delete?',
    qrManagement: 'QR Code Management',
    generateQR: 'Generate QR',
    unusedQR: 'Unused QR Codes',
    allQR: 'All QR Codes',
    link: 'URL',
    add: 'Add',
    cancel: 'Cancel',
    save: 'Save',
    close: 'Close',
    loading: 'Loading...',
    daysAgo: '{days} days ago',
    daysLeft: 'in {days} days',
    normal: 'Normal',
    warning: 'Warning',
    danger: 'Danger',
    expired: 'Expired',
    urgent: 'Urgent',
    attention: 'Attention',
    demoMode: 'Demo Mode',
    demoModeDescription: 'Data will not be saved',
  },
  'zh-CN': {
    dashboard: '仪表盘',
    cylinderList: '气瓶列表',
    addCylinder: '新增',
    edit: '编辑',
    delete: '删除',
    updatePressure: '快速更新压力',
    pressureChart: '压力图',
    pressureStatus: '压力状态',
    expiryStatus: '归还期限',
    lastUpdated: '最后更新',
    registerDate: '注册日期',
    location: '位置',
    gasType: '气体类型',
    qrCode: '二维码',
    noHistory: '无历史',
    notFound: '未找到气瓶',
    noCylinders: '没有气瓶',
    confirmDelete: '确定要删除吗？',
    qrManagement: '二维码管理',
    generateQR: '生成二维码',
    unusedQR: '未绑定二维码',
    allQR: '全部二维码',
    link: '链接',
    add: '添加',
    cancel: '取消',
    save: '保存',
    close: '关闭',
    loading: '加载中...',
    daysAgo: '{days}天前',
    daysLeft: '{days}天后',
    normal: '正常',
    warning: '警告',
    danger: '危险',
    expired: '已过期',
    urgent: '紧急',
    attention: '注意',
    demoMode: '演示模式',
    demoModeDescription: '数据不会被保存',
  },
  'zh-TW': {
    dashboard: '儀表板',
    cylinderList: '氣瓶列表',
    addCylinder: '新增',
    edit: '編輯',
    delete: '刪除',
    updatePressure: '快速更新壓力',
    pressureChart: '壓力圖',
    pressureStatus: '壓力狀態',
    expiryStatus: '歸還期限',
    lastUpdated: '最後更新',
    registerDate: '註冊日期',
    location: '位置',
    gasType: '氣體類型',
    qrCode: '二維碼',
    noHistory: '無歷史',
    notFound: '找不到氣瓶',
    noCylinders: '沒有氣瓶',
    confirmDelete: '確定要刪除嗎？',
    qrManagement: '二維碼管理',
    generateQR: '生成二維碼',
    unusedQR: '未綁定二維碼',
    allQR: '全部二維碼',
    link: '連結',
    add: '新增',
    cancel: '取消',
    save: '儲存',
    close: '關閉',
    loading: '加載中...',
    daysAgo: '{days}天前',
    daysLeft: '{days}天後',
    normal: '正常',
    warning: '警告',
    danger: '危險',
    expired: '已過期',
    urgent: '緊急',
    attention: '注意',
    demoMode: '演示模式',
    demoModeDescription: '資料不會被保存',
  },
  ko: {
    dashboard: '대시보드',
    cylinderList: '가스통 목록',
    addCylinder: '추가',
    edit: '편집',
    delete: '삭제',
    updatePressure: '즉시 압력 업데이트',
    pressureChart: '압력 차트',
    pressureStatus: '압력 상태',
    expiryStatus: '반납 기한',
    lastUpdated: '최종 업데이트',
    registerDate: '등록일',
    location: '위치',
    gasType: '가스 종류',
    qrCode: 'QR 코드',
    noHistory: '이력 없음',
    notFound: '가스통을 찾을 수 없음',
    noCylinders: '가스통이 없습니다',
    confirmDelete: '정말 삭제하시겠습니까?',
    qrManagement: 'QR 코드 관리',
    generateQR: 'QR 생성',
    unusedQR: '미연결 QR 코드',
    allQR: '전체 QR 코드',
    link: 'URL',
    add: '추가',
    cancel: '취소',
    save: '저장',
    close: '닫기',
    loading: '로딩 중...',
    daysAgo: '{days}일 전',
    daysLeft: '{days}일 후',
    normal: '정상',
    warning: '경고',
    danger: '위험',
    expired: '만료됨',
    urgent: '긴급',
    attention: '주의',
    demoMode: '데모 모드',
    demoModeDescription: '데이터가 저장되지 않습니다',
  },
  ar: {
    dashboard: 'لوحة القيادة',
    cylinderList: 'قائمة الأسطوانات',
    addCylinder: 'إضافة',
    edit: 'تعديل',
    delete: 'حذف',
    updatePressure: 'تحديث الضغط الفوري',
    pressureChart: 'مخطط الضغط',
    pressureStatus: 'حالة الضغط',
    expiryStatus: 'تاريخ الإرجاع',
    lastUpdated: 'آخر تحديث',
    registerDate: 'تاريخ التسجيل',
    location: 'الموقع',
    gasType: 'نوع الغاز',
    qrCode: 'رمز الاستجابة السريعة',
    noHistory: 'لا يوجد سجل',
    notFound: 'الأسطوانة غير موجودة',
    noCylinders: 'لا توجد أسطوانات',
    confirmDelete: 'هل أنت متأكد من الحذف؟',
    qrManagement: 'إدارة رمز الاستجابة السريعة',
    generateQR: 'توليد رمز',
    unusedQR: 'رموز غير مرتبطة',
    allQR: 'جميع الرموز',
    link: 'رابط',
    add: 'إضافة',
    cancel: 'إلغاء',
    save: 'حفظ',
    close: 'إغلاق',
    loading: 'جار التحميل...',
    daysAgo: 'منذ {days} يوم',
    daysLeft: 'بعد {days} يوم',
    normal: 'طبيعي',
    warning: 'تحذير',
    danger: 'خطر',
    expired: 'منتهي',
    urgent: 'عاجل',
    attention: 'انتباه',
    demoMode: 'وضع العرض',
    demoModeDescription: 'لن يتم حفظ البيانات',
  },
  sv: {
    dashboard: 'Instrumentpanel',
    cylinderList: 'Flasklista',
    addCylinder: 'Lägg till',
    edit: 'Redigera',
    delete: 'Ta bort',
    updatePressure: 'Snabbtrycksuppdatering',
    pressureChart: 'Tryckdiagram',
    pressureStatus: 'Tryckstatus',
    expiryStatus: 'Returdatum',
    lastUpdated: 'Senast uppdaterad',
    registerDate: 'Registreringsdatum',
    location: 'Plats',
    gasType: 'Gastyp',
    qrCode: 'QR-kod',
    noHistory: 'Ingen historik',
    notFound: 'Flaskan hittades inte',
    noCylinders: 'Inga flaskor',
    confirmDelete: 'Är du säker på att ta bort?',
    qrManagement: 'QR-kodhantering',
    generateQR: 'Generera QR',
    unusedQR: 'Oanvända QR-koder',
    allQR: 'Alla QR-koder',
    link: 'Länk',
    add: 'Lägg till',
    cancel: 'Avbryt',
    save: 'Spara',
    close: 'Stäng',
    loading: 'Laddar...',
    daysAgo: '{days} dagar sedan',
    daysLeft: 'om {days} dagar',
    normal: 'Normal',
    warning: 'Varning',
    danger: 'Fara',
    expired: 'Utgånget',
    urgent: 'Brådskande',
    attention: 'Observera',
    demoMode: 'Demoläge',
    demoModeDescription: 'Data sparas inte',
  },
  de: {
    dashboard: 'Dashboard',
    cylinderList: 'Zylinderliste',
    addCylinder: 'Hinzufügen',
    edit: 'Bearbeiten',
    delete: 'Löschen',
    updatePressure: 'Schnell Druck aktualisieren',
    pressureChart: 'Druckdiagramm',
    pressureStatus: 'Druckstatus',
    expiryStatus: 'Rückgabefrist',
    lastUpdated: 'Zuletzt aktualisiert',
    registerDate: 'Registrierungsdatum',
    location: 'Standort',
    gasType: 'Gasart',
    qrCode: 'QR-Code',
    noHistory: 'Keine Historie',
    notFound: 'Zylinder nicht gefunden',
    noCylinders: 'Keine Zylinder',
    confirmDelete: 'Wirklich löschen?',
    qrManagement: 'QR-Code Verwaltung',
    generateQR: 'QR generieren',
    unusedQR: 'Unbenutzte QR-Codes',
    allQR: 'Alle QR-Codes',
    link: 'Link',
    add: 'Hinzufügen',
    cancel: 'Abbrechen',
    save: 'Speichern',
    close: 'Schließen',
    loading: 'Lädt...',
    daysAgo: 'vor {days} Tagen',
    daysLeft: 'in {days} Tagen',
    normal: 'Normal',
    warning: 'Warnung',
    danger: 'Gefahr',
    expired: 'Abgelaufen',
    urgent: 'Dringend',
    attention: 'Achtung',
    demoMode: 'Demo-Modus',
    demoModeDescription: 'Daten werden nicht gespeichert',
  },
  fr: {
    dashboard: 'Tableau de bord',
    cylinderList: 'Liste des bouteilles',
    addCylinder: 'Ajouter',
    edit: 'Éditer',
    delete: 'Supprimer',
    updatePressure: 'Mise à jour rapide de la pression',
    pressureChart: 'Graphique de pression',
    pressureStatus: 'État de pression',
    expiryStatus: 'Date de retour',
    lastUpdated: 'Dernière mise à jour',
    registerDate: 'Date d\'enregistrement',
    location: 'Emplacement',
    gasType: 'Type de gaz',
    qrCode: 'QR code',
    noHistory: 'Aucun historique',
    notFound: 'Bouteille introuvable',
    noCylinders: 'Aucune bouteille',
    confirmDelete: 'Voulez-vous vraiment supprimer ?',
    qrManagement: 'Gestion des QR codes',
    generateQR: 'Générer QR',
    unusedQR: 'QR codes non utilisés',
    allQR: 'Tous les QR codes',
    link: 'Lien',
    add: 'Ajouter',
    cancel: 'Annuler',
    save: 'Enregistrer',
    close: 'Fermer',
    loading: 'Chargement...',
    daysAgo: 'il y a {days} jours',
    daysLeft: 'dans {days} jours',
    normal: 'Normal',
    warning: 'Avertissement',
    danger: 'Danger',
    expired: 'Expiré',
    urgent: 'Urgent',
    attention: 'Attention',
    demoMode: 'Mode démo',
    demoModeDescription: 'Les données ne seront pas enregistrées',
  },
};

export function getTranslation(key: string, lang: string, vars?: Record<string, string|number>) {
  const dict = translations[lang] || translations[defaultLanguage];
  let str = dict[key] || translations[defaultLanguage][key] || key;
  if (vars) {
    Object.entries(vars).forEach(([k, v]) => {
      str = str.replace(`{${k}}`, String(v));
    });
  }
  return str;
}

export function formatDate(date: string, lang: string) {
  if (!date) return '';
  try {
    return new Date(date).toLocaleDateString(lang, { year: 'numeric', month: '2-digit', day: '2-digit' });
  } catch {
    return date;
  }
}
